<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dark Mode Font Picker</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #0a0a0a;
      color: #fff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .container {
      width: 100%;
      max-width: 500px;
    }

    h1 {
      text-align: center;
      margin-bottom: 2rem;
      font-size: 1.75rem;
    }

    .dropdown-wrapper {
      position: relative;
    }

    .dropdown-button {
      width: 100%;
      padding: 0.875rem 1rem;
      background-color: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 0.5rem;
      color: #fff;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: background-color 0.2s;
    }

    .dropdown-button:hover {
      background-color: #222;
    }

    .dropdown-button svg {
      width: 1.25rem;
      height: 1.25rem;
      transition: transform 0.2s;
    }

    .dropdown-button.open svg {
      transform: rotate(180deg);
    }

    .dropdown-menu {
      position: absolute;
      top: calc(100% + 0.5rem);
      left: 0;
      width: 100%;
      background-color: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 0.5rem;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
      z-index: 50;
      display: none;
      overflow: hidden;
    }

    .dropdown-menu.open {
      display: block;
    }

    .tabs {
      display: flex;
      border-bottom: 1px solid #2a2a2a;
    }

    .tab {
      flex: 1;
      padding: 0.875rem 1rem;
      background: none;
      border: none;
      color: #888;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .tab:hover {
      color: #fff;
      background-color: #222;
    }

    .tab.active {
      color: #fff;
      background-color: #222;
    }

    .tab.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 2px;
      background-color: #3b82f6;
    }

    .search-box {
      padding: 0.75rem;
      border-bottom: 1px solid #2a2a2a;
    }

    .search-input {
      width: 100%;
      padding: 0.5rem 0.75rem;
      background-color: #222;
      border: 1px solid #333;
      border-radius: 0.375rem;
      color: #fff;
      font-size: 0.875rem;
      outline: none;
      transition: all 0.2s;
    }

    .search-input:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .search-input::placeholder {
      color: #666;
    }

    .font-list {
      max-height: 320px;
      overflow-y: auto;
      padding: 0.25rem 0;
    }

    .font-list::-webkit-scrollbar {
      width: 8px;
    }

    .font-list::-webkit-scrollbar-track {
      background: #1a1a1a;
    }

    .font-list::-webkit-scrollbar-thumb {
      background: #333;
      border-radius: 4px;
    }

    .font-list::-webkit-scrollbar-thumb:hover {
      background: #444;
    }

    .font-item {
      width: 100%;
      padding: 0.875rem 1rem;
      background: none;
      border: none;
      color: #fff;
      text-align: left;
      cursor: pointer;
      transition: background-color 0.2s;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 1rem;
    }

    .font-item:hover {
      background-color: #222;
    }

    .font-item.selected {
      background-color: rgba(59, 130, 246, 0.1);
    }

    .check-icon {
      width: 1rem;
      height: 1rem;
      color: #3b82f6;
      display: none;
    }

    .font-item.selected .check-icon {
      display: block;
    }

    .empty-state {
      padding: 3rem 1rem;
      text-align: center;
      color: #666;
    }

    .upload-section {
      padding: 1rem;
      border-bottom: 1px solid #2a2a2a;
    }

    .upload-button {
      width: 100%;
      padding: 0.875rem 1rem;
      background-color: #3b82f6;
      border: none;
      border-radius: 0.5rem;
      color: #fff;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: background-color 0.2s;
    }

    .upload-button:hover {
      background-color: #2563eb;
    }

    .upload-button svg {
      width: 1.25rem;
      height: 1.25rem;
    }

    .upload-info {
      margin-top: 0.5rem;
      text-align: center;
      font-size: 0.75rem;
      color: #666;
    }

    .custom-font-item {
      position: relative;
    }

    .remove-font {
      padding: 0.25rem;
      background: none;
      border: none;
      color: #888;
      cursor: pointer;
      opacity: 0;
      transition: all 0.2s;
      border-radius: 0.25rem;
    }

    .custom-font-item:hover .remove-font {
      opacity: 1;
    }

    .remove-font:hover {
      background-color: #333;
      color: #ef4444;
    }

    .remove-font svg {
      width: 1rem;
      height: 1rem;
    }

    .preview-box {
      margin-top: 2rem;
      padding: 1.5rem;
      background-color: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 0.5rem;
    }

    .preview-box h2 {
      font-size: 1.125rem;
      margin-bottom: 1rem;
    }

    .preview-text {
      color: #d1d5db;
      font-size: 1.25rem;
      line-height: 1.75;
    }

    #file-input {
      display: none;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Font Picker Demo</h1>
    
    <div class="dropdown-wrapper">
      <button class="dropdown-button" id="dropdown-button">
        <span id="selected-font-display">Inter</span>
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>

      <div class="dropdown-menu" id="dropdown-menu">
        <div class="tabs">
          <button class="tab active" data-tab="google">Google Fonts</button>
          <button class="tab" data-tab="custom">Custom Fonts</button>
        </div>

        <div class="tab-content active" id="google-tab">
          <div class="search-box">
            <input 
              type="text" 
              class="search-input" 
              id="search-input"
              placeholder="Search fonts..."
            >
          </div>
          <div class="font-list" id="google-font-list"></div>
        </div>

        <div class="tab-content" id="custom-tab">
          <div class="upload-section">
            <button class="upload-button" id="upload-button">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
              </svg>
              Upload Font File
            </button>
            <input type="file" id="file-input" accept=".ttf,.otf,.woff,.woff2" multiple>
            <p class="upload-info">Supports TTF, OTF, WOFF, WOFF2</p>
          </div>
          <div class="font-list" id="custom-font-list">
            <div class="empty-state">No custom fonts uploaded yet</div>
          </div>
        </div>
      </div>
    </div>

    <div class="preview-box">
      <h2>Preview Text</h2>
      <p class="preview-text" id="preview-text">
        The quick brown fox jumps over the lazy dog. 0123456789
      </p>
    </div>
  </div>

  <script>
    const googleFonts = [
      'Inter', 'Roboto', 'Open Sans', 'Lato', 'Montserrat', 
      'Oswald', 'Raleway', 'Poppins', 'Merriweather', 'Nunito',
      'Playfair Display', 'Ubuntu', 'Mukta', 'Rubik', 'Work Sans',
      'Fira Sans', 'Source Sans Pro', 'Noto Sans', 'PT Sans', 'Crimson Text',
      'Lora', 'Roboto Condensed', 'Slabo 27px', 'PT Serif', 'Inconsolata'
    ];

    let selectedFont = 'Inter';
    let customFonts = [];
    let loadedFonts = new Set(['Inter']);
    let isDropdownOpen = false;

    const dropdownButton = document.getElementById('dropdown-button');
    const dropdownMenu = document.getElementById('dropdown-menu');
    const selectedFontDisplay = document.getElementById('selected-font-display');
    const previewText = document.getElementById('preview-text');
    const searchInput = document.getElementById('search-input');
    const googleFontList = document.getElementById('google-font-list');
    const customFontList = document.getElementById('custom-font-list');
    const fileInput = document.getElementById('file-input');
    const uploadButton = document.getElementById('upload-button');

    // Initialize
    loadGoogleFont('Inter');
    renderGoogleFonts(googleFonts);

    // Toggle dropdown
    dropdownButton.addEventListener('click', function() {
      isDropdownOpen = !isDropdownOpen;
      dropdownMenu.classList.toggle('open', isDropdownOpen);
      dropdownButton.classList.toggle('open', isDropdownOpen);
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
      if (!dropdownButton.contains(e.target) && !dropdownMenu.contains(e.target)) {
        isDropdownOpen = false;
        dropdownMenu.classList.remove('open');
        dropdownButton.classList.remove('open');
      }
    });

    // Tab switching
    document.querySelectorAll('.tab').forEach(function(tab) {
      tab.addEventListener('click', function() {
        const tabName = tab.getAttribute('data-tab');
        
        document.querySelectorAll('.tab').forEach(function(t) {
          t.classList.remove('active');
        });
        tab.classList.add('active');
        
        document.querySelectorAll('.tab-content').forEach(function(content) {
          content.classList.remove('active');
        });
        document.getElementById(tabName + '-tab').classList.add('active');
      });
    });

    // Search functionality
    searchInput.addEventListener('input', function(e) {
      const query = e.target.value.toLowerCase();
      const filtered = googleFonts.filter(function(font) {
        return font.toLowerCase().includes(query);
      });
      renderGoogleFonts(filtered);
    });

    // Upload button
    uploadButton.addEventListener('click', () => {
      fileInput.click();
    });

    // File upload
    fileInput.addEventListener('change', (e) => {
      const files = Array.from(e.target.files);
      
      files.forEach(file => {
        if (file.type.match(/font\/(ttf|otf|woff|woff2)/) || 
            file.name.match(/\.(ttf|otf|woff|woff2)$/i)) {
          
          const reader = new FileReader();
          reader.onload = (event) => {
            const fontName = file.name.replace(/\.[^/.]+$/, '');
            const fontFace = new FontFace(fontName, `url(${event.target.result})`);
            
            fontFace.load().then((loadedFace) => {
              document.fonts.add(loadedFace);
              customFonts.push(fontName);
              renderCustomFonts();
              selectFont(fontName);
              isDropdownOpen = false;
              dropdownMenu.classList.remove('open');
              dropdownButton.classList.remove('open');
            }).catch(err => {
              console.error('Error loading font:', err);
            });
          };
          reader.readAsDataURL(file);
        }
      });
      
      fileInput.value = '';
    });

    function loadGoogleFont(fontName) {
      if (!loadedFonts.has(fontName)) {
        const link = document.createElement('link');
        link.href = `https://fonts.googleapis.com/css2?family=${fontName.replace(/ /g, '+')}:wght@400;700&display=swap`;
        link.rel = 'stylesheet';
        document.head.appendChild(link);
        loadedFonts.add(fontName);
      }
    }

    function selectFont(fontName) {
      selectedFont = fontName;
      selectedFontDisplay.textContent = fontName;
      selectedFontDisplay.style.fontFamily = fontName;
      previewText.style.fontFamily = fontName;
      
      // Update selected state
      document.querySelectorAll('.font-item').forEach(item => {
        item.classList.toggle('selected', item.getAttribute('data-font') === fontName);
      });
    }

    function renderGoogleFonts(fonts) {
      if (fonts.length === 0) {
        googleFontList.innerHTML = '<div class="empty-state">No fonts found</div>';
        return;
      }

      googleFontList.innerHTML = fonts.map(function(font) {
        return '<button class="font-item ' + (font === selectedFont ? 'selected' : '') + '" data-font="' + font + '">' +
          '<span style="font-family: ' + (loadedFonts.has(font) ? font : 'inherit') + '">' + font + '</span>' +
          '<svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">' +
            '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />' +
          '</svg>' +
        '</button>';
      }).join('');

      // Add event listeners
      googleFontList.querySelectorAll('.font-item').forEach(item => {
        const fontName = item.getAttribute('data-font');
        
        // Load font on hover
        item.addEventListener('mouseenter', () => {
          loadGoogleFont(fontName);
          setTimeout(() => {
            item.querySelector('span').style.fontFamily = fontName;
          }, 100);
        });

        // Select font on click
        item.addEventListener('click', () => {
          loadGoogleFont(fontName);
          selectFont(fontName);
          isDropdownOpen = false;
          dropdownMenu.classList.remove('open');
          dropdownButton.classList.remove('open');
        });
      });
    }

    function renderCustomFonts() {
      if (customFonts.length === 0) {
        customFontList.innerHTML = '<div class="empty-state">No custom fonts uploaded yet</div>';
        return;
      }

      customFontList.innerHTML = customFonts.map(function(font) {
        return '<button class="font-item custom-font-item ' + (font === selectedFont ? 'selected' : '') + '" data-font="' + font + '">' +
          '<span style="font-family: ' + font + '">' + font + '</span>' +
          '<div style="display: flex; align-items: center; gap: 0.5rem;">' +
            '<svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">' +
              '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />' +
            '</svg>' +
            '<button class="remove-font" data-font="' + font + '">' +
              '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24">' +
                '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />' +
              '</svg>' +
            '</button>' +
          '</div>' +
        '</button>';
      }).join('');

      // Add event listeners
      customFontList.querySelectorAll('.font-item').forEach(item => {
        const fontName = item.getAttribute('data-font');
        
        item.addEventListener('click', (e) => {
          if (!e.target.closest('.remove-font')) {
            selectFont(fontName);
            isDropdownOpen = false;
            dropdownMenu.classList.remove('open');
            dropdownButton.classList.remove('open');
          }
        });
      });

      // Remove font buttons
      customFontList.querySelectorAll('.remove-font').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const fontName = btn.getAttribute('data-font');
          customFonts = customFonts.filter(f => f !== fontName);
          
          if (selectedFont === fontName) {
            selectFont('Inter');
          }
          
          renderCustomFonts();
        });
      });
    }
  </script>
</body>
</html>